<script>
    async function deletePlayer(id) {
        if (confirm('Você tem certeza que deseja excluir?')) {
            try {
                const response = await fetch(`/player/${id}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });

                //console.log('Resposta do servidor:', response); // Log para depuração

                if (response.ok) {
                    alert('Jogador excluído com sucesso!');
                    window.location.reload();// Recarrega a página automaticamente
                } else {
                    alert('Erro ao excluir jogador.');

                }
            } catch (error) {
                alert('Erro na comunicação com o servidor');
                console.error('Erro:', error); // Log de erro detalhado
            }
        }
    }
</script>

<div>
    <h1>users</h1>
    {{#each players}}
        <div class="card" style="border: 1px solid black;">
            <div class="player-img">
                <img src="../src/assets/img/ft-generica-jogadores.jpg" width="200px">
            </div>
            <div>
                <h4>Nome:{{name}}</h4>
                <p>Idade:{{age}}</p>
                <p>Posição:{{position}}</p>
                <p>Time:{{team}}</p>
            </div>
            <div>
                <a href="/player/{{id}}"><button>Editar</button></a>
                <button onclick="deletePlayer('{{id}}')">Excluir</button>
            </div>
        </div>
        {{else}}
        <p>Nao contem jogadores</p>
    {{/each}}
</div>

